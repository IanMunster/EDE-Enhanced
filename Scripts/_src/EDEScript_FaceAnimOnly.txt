;- Animated ED-E -----------------------------------------------------------------------------------------------------------------------------
ref rCurrEdeVersion


Begin OnLoad
	if (This != rCurrEdeVersion)
		if (This == EDE3Ref)
			set rCurrEdeVersion to EDE3Ref
		elseif (This == EDE2Ref)
			set rCurrEdeVersion to EDE2Ref
		else
			set rCurrEdeVersion to EDE1Ref
		endif
	endif
	;// Debug
	Print "EDE Enhanced is Loaded"
End


Begin OnDeath
	SwapTexture rCurrEdeVersion Face "ehede\edefacedead"
	SwapTexture rCurrEdeVersion Color "ehede\edecolorgrey"
End


Begin OnStartCombat
	SwapTexture rCurrEdeVersion Face "ehede\edefaceAngry"
	SwapTexture rCurrEdeVersion Color "ehede\edecolorred"
End


Begin OnCombatEnd
	SwapTexture rCurrEdeVersion Face "ehede\edefaceIdle"
	SwapTexture rCurrEdeVersion Color "ehede\edecoloryellow"
End


Begin GameMode
	if (GetUnconscious)
		SwapTexture rCurrEdeVersion Face "ehede\edefacedead"
		SwapTexture rCurrEdeVersion Color "ehede\edecolorgrey"
	endif
	

	if (IsSoundPlaying NPCRobotEdEHappy rCurrEdeVersion) || ((rCurrEdeVersion.IsIdlePlayingEx EDESpecialIdleHappy) && (IsSoundPlaying NPCRobotEdESeeking rCurrEdeVersion == 0))
		SwapTexture rCurrEdeVersion Face "ehede\edefacehappy"
		SwapTexture rCurrEdeVersion Color "ehede\edecolorgreen"
	elseif (IsSoundPlaying NPCRobotEdEConfirmed rCurrEdeVersion)
		SwapTexture rCurrEdeVersion Face "ehede\edefaceyes"
		SwapTexture rCurrEdeVersion Color "ehede\edecolorgreen"
	elseif (IsSoundPlaying NPCRobotEdETriumphant rCurrEdeVersion) || ((rCurrEdeVersion.IsIdlePlayingEx EDESpecialIdleHappy) && (IsSoundPlaying NPCRobotEdESeeking rCurrEdeVersion == 0))
		SwapTexture rCurrEdeVersion Face "ehede\edefacetriumph"
		SwapTexture rCurrEdeVersion Color "ehede\edecolorgreen"
	elseif (IsSoundPlaying NPCRobotEdELaugh rCurrEdeVersion)
		SwapTexture rCurrEdeVersion Face "ehede\edefacelaugh"
		SwapTexture rCurrEdeVersion Color "ehede\edecolorgreen"
	elseif (IsSoundPlaying NPCRobotEdEGoodbyeHappy rCurrEdeVersion)
		SwapTexture rCurrEdeVersion Face "ehede\edefacegoodbyehappy"
		SwapTexture rCurrEdeVersion Color "ehede\edecolorgreen"
	elseif (IsSoundPlaying NPCRobotEdEHydaulicDoor rCurrEdeVersion)
		SwapTexture rCurrEdeVersion Face "ehede\edefacehelpfull"
		SwapTexture rCurrEdeVersion Color "ehede\edecolorgreen"
	elseif (IsSoundPlaying NPCRobotEdEAlertLowHealth rCurrEdeVersion) || (rCurrEdeVersion.IsIdlePlayingEx EDESpecialIdleScared)
		SwapTexture rCurrEdeVersion Face "ehede\edefacepanic"
		SwapTexture rCurrEdeVersion Color "ehede\edecolorred"
	elseif (IsSoundPlaying NPCRobotEdEDenied rCurrEdeVersion)
		SwapTexture rCurrEdeVersion Face "ehede\edefaceNo"
		SwapTexture rCurrEdeVersion Color "ehede\edecolorred"
	elseif (IsSoundPlaying NPCRobotEdEAnger rCurrEdeVersion) || (rCurrEdeVersion.IsIdlePlayingEx EDESpecialIdleAngry)
		SwapTexture rCurrEdeVersion Face "ehede\edefaceangry"
		SwapTexture rCurrEdeVersion Color "ehede\edecolorred"
	elseif (IsSoundPlaying NPCRobotEdECurious rCurrEdeVersion)
		SwapTexture rCurrEdeVersion Face "ehede\edefacecurious"
		SwapTexture rCurrEdeVersion Color "ehede\edecoloryellow"
	elseif (IsSoundPlaying NPCRobotEdEAlertThreat rCurrEdeVersion)
		SwapTexture rCurrEdeVersion Face "ehede\edefaceseek"
		SwapTexture rCurrEdeVersion Color "ehede\edecoloryellow"
	elseif (IsSoundPlaying NPCRobotEdESonarBeep rCurrEdeVersion) || (kCloaked == 1)
		SwapTexture rCurrEdeVersion Face "ehede\edefacesneak"
		SwapTexture rCurrEdeVersion Color "ehede\edecoloryellow"
	elseif (IsSoundPlaying NPCRobotEdEHomingBeep rCurrEdeVersion)
		SwapTexture rCurrEdeVersion Face "ehede\edefacefollow"
		SwapTexture rCurrEdeVersion Color "ehede\edecoloryellow"
	elseif (IsSoundPlaying NPCRobotEdELaser3D rCurrEdeVersion)
		SwapTexture rCurrEdeVersion Face "ehede\edefacecombat"
		SwapTexture rCurrEdeVersion Color "ehede\edecoloryellow"
	elseif (IsSoundPlaying NPCRobotEdESeeking rCurrEdeVersion)
		SwapTexture rCurrEdeVersion Face "ehede\edefacecraft"
		SwapTexture rCurrEdeVersion Color "ehede\edecoloryellow"
	elseif (IsSoundPlaying NPCRobotEdEFail rCurrEdeVersion)
		SwapTexture rCurrEdeVersion Face "ehede\edefacefail"
		SwapTexture rCurrEdeVersion Color "ehede\edecolorblue"
	elseif (IsSoundPlaying NPCRobotEdESad rCurrEdeVersion) || (rCurrEdeVersion.IsIdlePlayingEx EDESpecialIdleSad)
		SwapTexture rCurrEdeVersion Face "ehede\edefacesad"
		SwapTexture rCurrEdeVersion Color "ehede\edecolorblue"
	elseif (IsSoundPlaying NPCRobotEdEGoodbyeSad rCurrEdeVersion)
		SwapTexture rCurrEdeVersion Face "ehede\edefacegoodbyesad"
		SwapTexture rCurrEdeVersion Color "ehede\edecolorblue"
	else
		SwapTexture rCurrEdeVersion Face "ehede\edefaceidle"
		SwapTexture rCurrEdeVersion Color "ehede\edecoloryellow"
	endif
End
